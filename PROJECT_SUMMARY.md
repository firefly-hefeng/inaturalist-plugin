# iNaturalist æ•°æ®æ’ä»¶é¡¹ç›® - å®Œæˆæ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„ **iNaturalist æ•°æ®æ’ä»¶ç³»ç»Ÿ**ï¼ŒåŒ…å«ï¼š
1. **æ ¸å¿ƒæ’ä»¶** - Python æ•°æ®æ¥å£åº“
2. **æµ‹è¯•å¥—ä»¶** - è‡ªåŠ¨åŒ–æµ‹è¯•
3. **Web å‰ç«¯** - ç‹¬ç«‹çš„è‡ªç„¶ç‰©ç§æŸ¥è¯¢é—¨æˆ·

---

## ä¸€ã€æ ¸å¿ƒæ’ä»¶ (inaturalist_plugin/)

### æ¨¡å—ç»“æ„
```
inaturalist_plugin/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ client.py           # API å®¢æˆ·ç«¯ï¼Œæ”¯æŒé€Ÿç‡é™åˆ¶å’Œé‡è¯•
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ taxon.py            # ç‰©ç§æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ observation.py      # è§‚å¯Ÿè®°å½•æ¨¡å‹
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ taxon_service.py    # ç‰©ç§æœåŠ¡æ¥å£
â”‚   â””â”€â”€ observation_service.py  # è§‚å¯Ÿè®°å½•æœåŠ¡
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ image_utils.py      # å›¾ç‰‡ä¸‹è½½å’Œå¤„ç†
â”œâ”€â”€ adapters/
â”‚   â””â”€â”€ web_adapter.py      # Web æ¡†æ¶é€‚é…å™¨
â””â”€â”€ __init__.py             # ä¸»æ’ä»¶ç±»
```

### ä¸»è¦åŠŸèƒ½
- âœ… ç‰©ç§æœç´¢ï¼ˆæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€å­¦åï¼‰
- âœ… è‡ªåŠ¨è¡¥å…¨å»ºè®®
- âœ… è§‚å¯Ÿè®°å½•æŸ¥è¯¢ï¼ˆæŒ‰ç‰©ç§ã€ä½ç½®ã€æ—¶é—´ç­‰ï¼‰
- âœ… å¤šå°ºå¯¸å›¾ç‰‡è·å–å’Œä¸‹è½½
- âœ… åˆ†ç±»æ ‘è·å–ï¼ˆç¥–å…ˆå’Œå­åˆ†ç±»ç¾¤ï¼‰
- âœ… æœ¬åœ°å›¾ç‰‡ç¼“å­˜
- âœ… Flask/FastAPI é›†æˆ

### ä½¿ç”¨ç¤ºä¾‹
```python
from inaturalist_plugin import INaturalistPlugin

plugin = INaturalistPlugin()

# æœç´¢ç‰©ç§
results = plugin.search_species("å–œé¹Š", per_page=10)

# è·å–è¯¦æƒ…
taxon = plugin.get_species_detail(8318)

# ä¸‹è½½å›¾ç‰‡
images = plugin.download_species_images(8318, size="large", max_images=5)

# æœç´¢è§‚å¯Ÿè®°å½•
observations = plugin.search_observations(
    taxon_id=8318,
    lat=39.9,
    lng=116.4,
    radius=10
)
```

---

## äºŒã€æµ‹è¯•å¥—ä»¶ (tests/)

### æµ‹è¯•æ–‡ä»¶
- `test_core.py` - æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼ˆ11 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
- `TEST_REPORT.md` - æµ‹è¯•æŠ¥å‘Š

### æµ‹è¯•ç»“æœ
| æŒ‡æ ‡ | ç»“æœ |
|------|------|
| æ€»æµ‹è¯•æ•° | 11 |
| é€šè¿‡ | 11 âœ… |
| å¤±è´¥ | 0 âŒ |
| é€šè¿‡ç‡ | 100% |

### æµ‹è¯•è¦†ç›–åŠŸèƒ½
- å®¢æˆ·ç«¯åˆ›å»ºå’Œè¿æ¥
- ç‰©ç§æœç´¢å’Œè¯¦æƒ…è·å–
- è‡ªåŠ¨è¡¥å…¨
- è§‚å¯Ÿè®°å½•æœç´¢
- ä½ç½®æœç´¢
- å›¾ç‰‡è·å–
- ç‰©ç§ç»Ÿè®¡
- åˆ†é¡µåŠŸèƒ½
- æ’ä»¶é›†æˆ

---

## ä¸‰ã€å‰ç«¯åº”ç”¨ (frontend/)

### æŠ€æœ¯æ ˆ
- **åç«¯**: Python Flask
- **å‰ç«¯**: HTML5, CSS3, JavaScript
- **UI æ¡†æ¶**: Bootstrap 5
- **åœ°å›¾**: Leaflet.js + OpenStreetMap
- **å›¾æ ‡**: Font Awesome

### é¡µé¢ç»“æ„
```
frontend/
â”œâ”€â”€ app.py                    # Flask åç«¯
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html            # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ index.html           # é¦–é¡µï¼ˆæœç´¢å…¥å£ã€æœ€æ–°è§‚å¯Ÿï¼‰
â”‚   â”œâ”€â”€ search.html          # ç‰©ç§æœç´¢é¡µ
â”‚   â”œâ”€â”€ species_detail.html  # ç‰©ç§è¯¦æƒ…é¡µ
â”‚   â”œâ”€â”€ observations.html    # è§‚å¯Ÿè®°å½•é¡µ
â”‚   â””â”€â”€ map.html             # åœ°å›¾æµè§ˆé¡µ
â””â”€â”€ static/
    â”œâ”€â”€ css/style.css        # æ ·å¼è¡¨
    â””â”€â”€ js/main.js           # ä¸»è„šæœ¬
```

### åŠŸèƒ½ç‰¹æ€§
- ğŸ” **é¦–é¡µ** - æœç´¢å…¥å£ã€çƒ­é—¨ç‰©ç§ã€æœ€æ–°ç ”ç©¶çº§è§‚å¯Ÿ
- ğŸ“¸ **æœç´¢é¡µ** - ç‰©ç§æœç´¢ã€ç­›é€‰ã€åˆ†é¡µã€è‡ªåŠ¨è¡¥å…¨
- ğŸŒ¿ **è¯¦æƒ…é¡µ** - ç‰©ç§ä¿¡æ¯ã€å›¾ç‰‡ç”»å»Šã€è§‚å¯Ÿè®°å½•ã€åˆ†ç±»æ ‘
- ğŸ“· **è§‚å¯Ÿé¡µ** - è§‚å¯Ÿè®°å½•åˆ—è¡¨ã€ä½ç½®ç­›é€‰
- ğŸ—ºï¸ **åœ°å›¾é¡µ** - äº¤äº’å¼åœ°å›¾ã€ä½ç½®ç‚¹å‡»æœç´¢ã€å‘¨å›´ç‰©ç§

### è¿è¡Œæ–¹æ³•
```bash
cd frontend
pip install flask flask-cors
python app.py
# è®¿é—® http://localhost:5000
```

---

## å››ã€API æ¥å£æ–‡æ¡£

### æ•°æ®æ¥å£
| æ¥å£ | è¯´æ˜ |
|------|------|
| `GET /api/search` | ç‰©ç§æœç´¢ |
| `GET /api/species/<id>` | ç‰©ç§è¯¦æƒ… |
| `GET /api/species/<id>/images` | ç‰©ç§å›¾ç‰‡ |
| `GET /api/autocomplete` | è‡ªåŠ¨è¡¥å…¨ |
| `GET /api/observations` | è§‚å¯Ÿè®°å½•æœç´¢ |
| `GET /api/location/species` | ä½ç½®å‘¨å›´ç‰©ç§ |
| `GET /api/taxonomy/<id>/children` | å­åˆ†ç±»ç¾¤ |
| `GET /api/taxonomy/<id>/ancestors` | ç¥–å…ˆåˆ†ç±»ç¾¤ |

### æ’ä»¶æ¥å£
è¯¦è§ `API_REFERENCE.md` å’Œ `USAGE.md`

---

## äº”ã€é¡¹ç›®ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| Python æ–‡ä»¶ | 16 | æ’ä»¶æ ¸å¿ƒ + æµ‹è¯• + å‰ç«¯ |
| HTML æ–‡ä»¶ | 6 | å‰ç«¯é¡µé¢æ¨¡æ¿ |
| CSS æ–‡ä»¶ | 1 | æ ·å¼è¡¨ |
| JS æ–‡ä»¶ | 1 | å‰ç«¯è„šæœ¬ |
| Markdown æ–‡ä»¶ | 6 | æ–‡æ¡£ |
| æ€»ä»£ç è¡Œæ•° | ~5000+ | ä¼°ç®— |

---

## å…­ã€ä½¿ç”¨æŒ‡å—

### 1. å®‰è£…ä¾èµ–
```bash
pip install requests flask flask-cors
```

### 2. ä½¿ç”¨æ’ä»¶
```python
from inaturalist_plugin import INaturalistPlugin

plugin = INaturalistPlugin()
results = plugin.search_species("å–œé¹Š")
```

### 3. è¿è¡Œå‰ç«¯
```bash
cd frontend
python app.py
```

### 4. è¿è¡Œæµ‹è¯•
```bash
cd tests
python test_core.py
```

---

## ä¸ƒã€æ•°æ®æ¥æº

- **æ•°æ®æä¾›**: [iNaturalist](https://www.inaturalist.org/)
- **API æ–‡æ¡£**: https://api.inaturalist.org/v1/docs/
- **æ•°æ®è®¸å¯**: éµå¾ª iNaturalist çš„ç‰ˆæƒå’Œè®¸å¯åè®®

---

## å…«ã€é¡¹ç›®ç‰¹ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **å®Œæ•´çš„é”™è¯¯å¤„ç†** - è‡ªåŠ¨é‡è¯•ã€é€Ÿç‡é™åˆ¶ã€å¼‚å¸¸æ•è·
3. **æ•°æ®æ¨¡å‹ä¸°å¯Œ** - å®Œæ•´çš„ç‰©ç§å’Œè§‚å¯Ÿè®°å½•ä¿¡æ¯
4. **Web é›†æˆå‹å¥½** - å†…ç½® Flask/FastAPI é€‚é…å™¨
5. **å“åº”å¼å‰ç«¯** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
6. **äº¤äº’å¼åœ°å›¾** - Leaflet åœ°å›¾é›†æˆ
7. **è‡ªåŠ¨è¡¥å…¨** - å®æ—¶æœç´¢å»ºè®®
8. **å›¾ç‰‡ç¼“å­˜** - æœ¬åœ°å›¾ç‰‡ä¸‹è½½å’Œç¼“å­˜

---

## ä¹ã€æœªæ¥æ‰©å±•å»ºè®®

1. æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½
2. å®ç°æœ¬åœ°æ•°æ®åº“ç¼“å­˜
3. æ·»åŠ æ•°æ®åˆ†æåŠŸèƒ½ï¼ˆç»Ÿè®¡å›¾è¡¨ï¼‰
4. æ”¯æŒç¦»çº¿æ¨¡å¼
5. æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
6. é›†æˆæ›´å¤šæ•°æ®æº

---

## åã€æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶
- `inaturalist_plugin/__init__.py` - ä¸»æ’ä»¶ç±»
- `inaturalist_plugin/core/client.py` - API å®¢æˆ·ç«¯
- `inaturalist_plugin/services/taxon_service.py` - ç‰©ç§æœåŠ¡
- `inaturalist_plugin/services/observation_service.py` - è§‚å¯ŸæœåŠ¡

### æ–‡æ¡£
- `README.md` - é¡¹ç›®æ¦‚è¿°
- `API_REFERENCE.md` - API å‚è€ƒæ–‡æ¡£
- `USAGE.md` - æ¥å£ä½¿ç”¨ä»‹ç»
- `EXAMPLES.md` - ä½¿ç”¨ç¤ºä¾‹
- `CHANGELOG.md` - æ›´æ–°æ—¥å¿—
- `tests/TEST_REPORT.md` - æµ‹è¯•æŠ¥å‘Š
- `frontend/README.md` - å‰ç«¯è¯´æ˜

### æµ‹è¯•å’Œå‰ç«¯
- `tests/test_core.py` - æµ‹è¯•ä»£ç 
- `frontend/app.py` - Flask åº”ç”¨
- `frontend/templates/*.html` - HTML æ¨¡æ¿
- `frontend/static/css/style.css` - æ ·å¼
- `frontend/static/js/main.js` - è„šæœ¬

---

**é¡¹ç›®çŠ¶æ€**: âœ… å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
